
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\project\RIDE\obj\download.o:     file format elf32-littlearm
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\project\RIDE\obj\download.o

Disassembly of section .text.SerialDownload:

00000000 <SerialDownload>:
SerialDownload():
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:47
  * @brief  Download a file via serial port
  * @param  None
  * @retval None
  */
void SerialDownload(void)
{
   0:	b530      	push	{r4, r5, lr}
   2:	b085      	sub	sp, #20
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:48
  uint8_t Number[10] = "          ";
   4:	f10d 0506 	add.w	r5, sp, #6	; 0x6
   8:	220a      	movs	r2, #10
   a:	491a      	ldr	r1, [pc, #104]	(74 <SerialDownload+0x74>)
   c:	4628      	mov	r0, r5
   e:	f7ff fffe 	bl	0 <memcpy>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:51
  int32_t Size = 0;

  SerialPutString("Waiting for the file to be sent ... (press 'a' to abort)\n\r");
  12:	4819      	ldr	r0, [pc, #100]	(68 <Serial_PutString+0x68>)
  14:	f7ff fffe 	bl	0 <Serial_PutString>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:52
  Size = Ymodem_Receive(&tab_1024[0]);
  18:	4818      	ldr	r0, [pc, #96]	(64 <Ymodem_Receive+0x64>)
  1a:	f7ff fffe 	bl	0 <Ymodem_Receive>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:53
  if (Size > 0)
  1e:	1e04      	subs	r4, r0, #0
  20:	dd14      	ble.n	4c <SerialDownload+0x4c>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:55
  {
    SerialPutString("\n\n\r Programming Completed Successfully!\n\r--------------------------------\r\n Name: ");
  22:	4817      	ldr	r0, [pc, #92]	(80 <SerialDownload+0x80>)
  24:	f7ff fffe 	bl	0 <Serial_PutString>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:56
    SerialPutString(file_name);
  28:	4816      	ldr	r0, [pc, #88]	(5c <Serial_PutString+0x5c>)
  2a:	f7ff fffe 	bl	0 <Serial_PutString>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:57
    Int2Str(Number, Size);
  2e:	4621      	mov	r1, r4
  30:	4628      	mov	r0, r5
  32:	f7ff fffe 	bl	0 <Int2Str>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:58
    SerialPutString("\n\r Size: ");
  36:	4814      	ldr	r0, [pc, #80]	(54 <Serial_PutString+0x54>)
  38:	f7ff fffe 	bl	0 <Serial_PutString>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:59
    SerialPutString(Number);
  3c:	4628      	mov	r0, r5
  3e:	f7ff fffe 	bl	0 <Serial_PutString>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:60
    SerialPutString(" Bytes\r\n");
  42:	4812      	ldr	r0, [pc, #72]	(4c <Serial_PutString+0x4c>)
  44:	f7ff fffe 	bl	0 <Serial_PutString>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:61
    SerialPutString("-------------------\n");
  48:	4811      	ldr	r0, [pc, #68]	(90 <SerialDownload+0x90>)
  4a:	e00e      	b.n	6a <SerialDownload+0x6a>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:63
  }
  else if (Size == -1)
  4c:	f1b4 3fff 	cmp.w	r4, #4294967295	; 0xffffffff
  50:	d101      	bne.n	56 <SerialDownload+0x56>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:65
  {
    SerialPutString("\n\n\rThe image size is higher than the allowed space memory!\n\r");
  52:	4810      	ldr	r0, [pc, #64]	(94 <SerialDownload+0x94>)
  54:	e009      	b.n	6a <SerialDownload+0x6a>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:67
  }
  else if (Size == -2)
  56:	f114 0f02 	cmn.w	r4, #2	; 0x2
  5a:	d101      	bne.n	60 <SerialDownload+0x60>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:69
  {
    SerialPutString("\n\n\rVerification failed!\n\r");
  5c:	480e      	ldr	r0, [pc, #56]	(98 <SerialDownload+0x98>)
  5e:	e004      	b.n	6a <SerialDownload+0x6a>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:71
  }
  else if (Size == -3)
  60:	f114 0f03 	cmn.w	r4, #3	; 0x3
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:73
  {
    SerialPutString("\r\n\nAborted by user.\n\r");
  64:	bf0c      	ite	eq
  66:	480d      	ldreq	r0, [pc, #52]	(9c <SerialDownload+0x9c>)
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:77
  }
  else
  {
    SerialPutString("\n\rFailed to receive the file!\n\r");
  68:	480d      	ldrne	r0, [pc, #52]	(a0 <SerialDownload+0xa0>)
  6a:	f7ff fffe 	bl	0 <Serial_PutString>
D:\WkPjt\MStory2.0\Mango-Z1.Firmware\Z1.Src005.AN2557.IAP.BootLoader\src/download.c:79
  }
}
  6e:	b005      	add	sp, #20
  70:	bd30      	pop	{r4, r5, pc}
  72:	46c0      	nop			(mov r8, r8)
	...
  80:	0000003b 	.word	0x0000003b
  84:	00000000 	.word	0x00000000
  88:	0000008e 	.word	0x0000008e
  8c:	00000098 	.word	0x00000098
  90:	000000a1 	.word	0x000000a1
  94:	000000b6 	.word	0x000000b6
  98:	000000f3 	.word	0x000000f3
  9c:	0000010d 	.word	0x0000010d
  a0:	00000123 	.word	0x00000123
